---
layout: post
title: Workshop
author: patrick
description: Workshop
category: Project
tags: [featured, devops]
published: true
---

{% include JB/setup %}

Welcome to our workshop.  The goal of this project is to be able to easily share open source projects and knowledge we've learned at our shop, [Avatar New York](http://avatarnewyork.com) with other developers, designers, projects managers, digital marketers, and others.  We've broken up the content into 2 types of post through the use of `Categories`:

* Projects - open source project information
* Posts - blog posts

This project makes use of several technologies and platforms.  You can read more about them in [here](/post/jekyll_travisci_amazons3_ohmy).

## Requirements
* Amazon S3 Account
* GitHub Account
* TravisCI
* Prose.io (optional for editing)

## Setup
Most of the deployment steps below were taken from [PaperPlanes](http://www.paperplanes.de/2013/8/13/deploying-your-jekyll-blog-to-s3-with-travis-ci.html) which has a great article if your interested in some of the details.  We've added some things and made some adjustments for this project.

1. [Get JekyllBootstrap](http://jekyllbootstrap.com/)
2. [Setup an Amazon S3 Bucket](http://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html)
3. Apply a public policy on your bucket to ensure NEW posts will be publicly available.

*gist 6702338*

4. Create an amazon user in AMI and grant read/write access to your S3 Bucket
5. Create .travis.yml file in the root directory and modify accordingly:

```
language: ruby
rvm:
  - 1.9.3
  script: bundle exec jekyll build
  install: bundle install
  after_success: bundle exec s3_website push --headless
```

6. Install the travis gem.  See [Travis Documentation](http://about.travis-ci.org/docs/user/encryption-keys/) for more info.

`gem install travis`

7. Inside your project directory, run travis encryption on your Amazon user credentials.  This will encrypt your amazon credentials and store them inside your .travis.yml file

```
$ travis encrypt S3_ACCESS_KEY_ID=asdlfkjsadf --add env.global
$ travis encrypt S3_SECRET_KEY=kajsdflkjasdfk --add env.global
```

8. Setup the [s3_website config](https://github.com/laurilehmijoki/s3_website).  See [s3_website](https://github.com/laurilehmijoki/s3_website) for more info.

```
s3_id: <%= ENV['S3_ACCESS_KEY_ID'] %>
s3_secret: <%= ENV['S3_SECRET_KEY'] %>
s3_bucket: your_website_bucket_name

max_age:
  "public/*": 6000
    "*": 300

	s3_endpoint: us-east-1

	s3_reduced_redundancy: true

	concurrency_level: 100
```

9. Create the Gemfile.  We use a few plugins that require additional gems.  Adjust as you see fit:

```
source "https://rubygems.org"

gem 'jekyll'
gem 'redcarpet'
gem 's3_website'
gem 'nokogiri'
gem 'json'
```

10. Create [_prose.yml](https://github.com/avatarnewyork/avatarnewyork.github.com/blob/master/_prose.yml) and edit to your liking.  See [Prose Wiki](https://github.com/prose/prose/wiki/Prose-Configuration) for more info.
11. Login to TravisCI and enable the service hook for your repo
12. Add the new files to git.  Commit to master.  Push and wait for the magic.
13. Once the Travis build is complete, you can view the site by going to your Endpoint.

## Quick Start Publishing
1. Login to prose.io with your github account
2. Navigate to your repo
3. Create a new file (or edit an existing file)
4. Edit in [Markdown](http://github.github.com/github-flavored-markdown/)
4. Press save to commit changes and trigger a deploy
5. Check back in a few minutes to see the page on your site.
